# ================================================================
# ECONEURA BACKEND - ENVIRONMENT VARIABLES
# ================================================================
# Copia este archivo a .env y rellena los valores reales
# NUNCA commitees .env a Git
# ================================================================

# ----------------------------------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------------------------------
NODE_ENV=development
PORT=8080
WEBSITES_PORT=8080

# ----------------------------------------------------------------
# FRONTEND URL (CORS)
# ----------------------------------------------------------------
# Development:
FRONTEND_URL=http://localhost:5173

# Staging:
# FRONTEND_URL=https://econeura-frontend-staging.azurestaticapps.net

# Production:
# FRONTEND_URL=https://econeura-frontend-prod.azurestaticapps.net

# ----------------------------------------------------------------
# DATABASE (PostgreSQL)
# ----------------------------------------------------------------
# Development (local):
# DATABASE_URL=postgresql://user:password@localhost:5432/econeura_dev

# Azure PostgreSQL Flexible Server:
# DATABASE_URL=postgresql://econeura_admin@econeura-db-staging:PASSWORD@econeura-db-staging.postgres.database.azure.com:5432/econeura?sslmode=require

# Mock DB (para testing sin DB real):
USE_MOCK_DB=true

# ----------------------------------------------------------------
# REDIS (Cache & Sessions)
# ----------------------------------------------------------------
# Development (local):
# REDIS_URL=redis://localhost:6379

# Azure Redis Cache:
# REDIS_URL=rediss://:PASSWORD@econeura-redis-staging.redis.cache.windows.net:6380

# ----------------------------------------------------------------
# SESSION & JWT SECRETS
# ----------------------------------------------------------------
# Generar con: openssl rand -base64 64
SESSION_SECRET=your-session-secret-min-64-chars-REPLACE-THIS-WITH-SECURE-VALUE
JWT_ACCESS_SECRET=your-jwt-access-secret-min-64-chars-REPLACE-THIS-WITH-SECURE-VALUE
JWT_REFRESH_SECRET=your-jwt-refresh-secret-min-64-chars-REPLACE-THIS-WITH-SECURE-VALUE

# JWT Token Expiration
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ----------------------------------------------------------------
# OPENAI API
# ----------------------------------------------------------------
# OpenAI API Key para GPT-4/GPT-5
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OpenAI Model (opcional, default: gpt-4-turbo)
# OPENAI_MODEL=gpt-4-turbo

# ----------------------------------------------------------------
# OAUTH 2.0 - MICROSOFT
# ----------------------------------------------------------------
# Azure AD App Registration:
# https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=http://localhost:8080/api/auth/microsoft/callback

# ----------------------------------------------------------------
# OAUTH 2.0 - GITHUB
# ----------------------------------------------------------------
# GitHub OAuth App:
# https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:8080/api/auth/github/callback

# ----------------------------------------------------------------
# OAUTH 2.0 - GOOGLE
# ----------------------------------------------------------------
# Google Cloud Console:
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:8080/api/auth/google/callback

# ----------------------------------------------------------------
# AZURE SERVICES (Production/Staging)
# ----------------------------------------------------------------
# Azure Storage Account (para RAG Library)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=econeura...

# Azure Key Vault (para secrets en producción)
# AZURE_KEY_VAULT_NAME=econeura-keyvault-staging
# AZURE_KEY_VAULT_URL=https://econeura-keyvault-staging.vault.azure.net/

# Azure Application Insights (monitoring)
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=xxx;IngestionEndpoint=https://...

# ----------------------------------------------------------------
# MAKE.COM / N8N WEBHOOKS
# ----------------------------------------------------------------
# Make.com API Key (para verificar webhooks)
# MAKE_API_KEY=your-make-api-key

# n8n Webhook URL base (si usas n8n)
# N8N_BASE_URL=https://your-n8n-instance.com

# ----------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------
# Redis-based rate limiting (requiere Redis)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ----------------------------------------------------------------
# LOGGING
# ----------------------------------------------------------------
# Winston log level: error | warn | info | http | verbose | debug | silly
LOG_LEVEL=info

# ----------------------------------------------------------------
# FEATURES FLAGS
# ----------------------------------------------------------------
# Habilitar/deshabilitar features
ENABLE_VOICE_CONTROLS=false
ENABLE_RAG_LIBRARY=true
ENABLE_HITL=true
ENABLE_ANALYTICS=true

# ----------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------
# 1. Valores con "your-" son PLACEHOLDERS - reemplázalos
# 2. En Azure, usa Key Vault para valores sensibles en producción
# 3. Los scripts de setup automáticamente generan algunos secrets
# 4. JWT secrets deben ser mínimo 64 caracteres
# 5. NUNCA expongas este archivo en repositorio público
# ================================================================
